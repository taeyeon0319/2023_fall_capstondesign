name: "김태연 - 웹프로그래밍 실습 CI/CD"

on: 
  push:
    branches: 
      - main
    #tag:
    #  - release.*

jobs:
  taeyeon_kim:
    runs-on: ubuntu-latest
    steps: 
      - run: echo "asdfdsa ${{ github.repository }}."
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4 
        with:
          node-version: 18
      - name: "backend로 들어가"
        run: cd backend
      - name: "Node설치"
        run: npm install
      - name : "NPM 실행"
        run: node index.mjs
      
      # 프론트엔드
      - run: npm run build 
      # 위에처럼만 하면 index.js 기타 파일들이 github컨테이너에 저장된 상태
      # 빌드한 프론트엔드가 운영하는 서버에 저장되게 해야함
      # 1. S3 에 배포하고 있다. => github container에 aws cli올려서
      # 1-A. aws cli에서 s3에 업데이트를 시켜야 함
      # 2. 개인 EC2서버에 업데이트하고 있다. => EC2에 접속할 수 있는 SSH환경 구축
      # 2-A. Github Container ssh접속하고, 명령어까지 실행을 바로 한다. 
      # 2-B. npm run build를 하고 난 다음에 scp(ssh파일 복사)로 파일을 업데이트

      # 백엔드
      # 업데이트 하는 과정을 명령어로 구성해서 처리해야한다.(nodemon -> git pull)
